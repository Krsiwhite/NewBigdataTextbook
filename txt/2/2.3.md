## 2.2 ZooKeeper：分布式系统的协调者
&emsp;&emsp;Zookeeper是一个开源的分布式协调服务，由Apache基金会开发和维护，主要用于分布式系统的协调管理和通信，其最初是作为Hadoop项目的一部分开发的，目的是解决分布式系统中常见的协调问题，如数据同步、配置管理等。随着分布式系统的发展，Zookeeper逐渐成为一个独立的项目，并被广泛应用于各种分布式系统架构中。

&emsp;&emsp;试想一下，你的餐厅后厨有一名大厨和一名学徒，大厨负责调配后厨中其他厨师有序工作，学徒每天刻苦努力地跟着大厨学习，突然有一天，大厨工作到一半家里有事请假了，那此时作为餐厅老板的你是不是应该马上让学徒接管大厨的工作，继续维持后厨的工作呢？其实ZooKeeper在分布式系统中，也起到了餐厅老板的作用，当某节点出现故障时，让其他节点接替故障节点的工作，保障分布式系统的正常运行，实现高可用性。目前，ZooKeeper已被大量开源系统采用，包括HDFS、YARN、HBase等，本节将通过实验来向大家演示ZooKeeper是如何实现高可用性的，你可以记住上述大厨和学徒的场景与ZooKeeper的高可用性类比学习以加深理解。

### 2.2.1 ZooKeeper与HDFS
&emsp;&emsp;在HDFS中，NameNode负责管理文件系统的元数据，是整个HDFS的核心，如果NameNode所在的机器发生故障，那么整个分布式系统将出现问题，对于这种情况，我们可以通过Zookeeper实现NameNode的高可用性，也就是当NameNode所在的机器出现故障时，选出另一个NameNode来接替其工作，从而避免单点故障，实现高可用性，实现了高可用性的HDFS我们就可以称之为HA-HDFS（High Available HDFS），那接下来我们开始体验一下ZooKeeper是如何实现HDFS的高可用性的吧。

&emsp;&emsp;在正式开始前，我们还是先给我们要完成的操作列个清单：
1. 安装ZooKeeper 
2. 配置ZooKeeper
3. 验证ZooKeeper启动效果
2. 初始化HA-HDFS配置
3. 首次启动HA-HDFS
4. 再次启动HA-HDFS
5. 验证HA-HDFS高可用性